
<div id="divFeedbackThread" class=" no-left-margin no-right-margin" data-bind=" visible: my.feedbackThreadsVm.viewSettings.showDailog()" style="display: none;">
    <div id="divThreadWrapper"  data-bind="fullWindowHeight: my.feedbackThreadsVm.viewSettings.showDailog(),click: my.feedbackThreadsVm.closeFeedbackDailog"></div>
    <div id="divCloseModalButton" data-bind="click: my.feedbackThreadsVm.closeFeedbackDailog">
        <span><i class="glyphicon glyphicon-remove rating-slow "></i></span>
    </div>
     <div id="divFeedbackContainer">
         <div class="panel panel-white post panel-shadow">
             <div class="post-heading">
                 <div class="pull-left image">
                     <img data-bind="attr: { src: my.rootUrl + '/Uploads/ProfilePicture/' + my.feedbackThreadsVm.feedbackData.User.UserImageUrl() }"
                          class="img-circle avatar" alt="user profile image">
                 </div>
                 <div class="pull-left meta">
                     <div class="title h5" style="display: inline-block;">
                         <strong>  <a data-bind="text: my.feedbackThreadsVm.feedbackData.User.UserFullName, attr: { href: my.rootUrl + '/Profile/UserProfile?userId=' + my.feedbackThreadsVm.feedbackData.User.UserId }"></a></strong>
                     </div>
                     <div data-bind="text: 'Added ' + my.feedbackThreadsVm.feedbackData.FeedbackType.FeedbackTypeDescription() + ' Feedback'" class="text-muted time" style="display: inline-block;"></div>
                     <div style="display: inline-block; padding-left: 10px"
                          data-bind="css: {
                                            'rating-slow': my.feedbackThreadsVm.feedbackData.Rating() == 1,
                                            'rating-Average': my.feedbackThreadsVm.feedbackData.Rating() == 2,
                                            'rating-Fast': my.feedbackThreadsVm.feedbackData.Rating() == 3,
                                            'rating-Exceptional': my.feedbackThreadsVm.feedbackData.Rating() == 4
                                        }">
                         <!-- ko foreach: new Array(my.feedbackThreadsVm.feedbackData.Rating())  -->
                         <span class="glyphicon glyphicon-star"
                               style="display: inline-block;"></span>
                         <!-- /ko -->
                     </div>

                     <h6 data-bind="text: moment(my.feedbackThreadsVm.feedbackData.AddedOn()).format('MMMM Do YYYY, h:mm a')" class="text-muted time"></h6>
                     <h6 data-bind="visible: my.feedbackThreadsVm.feedbackData.FeedbackType.FeedbackTypeId() != 5, text: my.feedbackThreadsVm.feedbackData.Title()" class="text-muted time"></h6>
                     <h6 data-bind="visible: my.feedbackThreadsVm.feedbackData.FeedbackType.FeedbackTypeId() == 5, text: 'Feedback Week : ' + moment(my.feedbackThreadsVm.feedbackData.StartDate()).format('Do MMMM YYYY') + ' - ' + moment(my.feedbackThreadsVm.feedbackData.EndDate()).format('Do MMMM YYYY')" class="text-muted time"></h6>
                 </div>
             </div>
             <div class="post-description">
                 <p data-bind="text: my.feedbackThreadsVm.feedbackData.FeedbackText()" style="white-space: pre-wrap;"></p>
             </div>
         </div>
         
         <div id="divCommentThreads" >
             <div class="panel-white panel-shadow" data-bind="visible: my.feedbackThreadsVm.feedbackData.Threads().length==0">
                  <div class="row" style="padding: 10px 20px 10px 20px">
                      <div class="col-xs-12">
                          No Notes for this feedback. Leave a note on this.
                      </div>
                 </div>
                      </div>
             <div class="panel-white panel-shadow" data-bind="foreach: my.feedbackThreadsVm.feedbackData.Threads, visible: my.feedbackThreadsVm.feedbackData.Threads().length > 0">
                 <div class="row">
                     <div class="col-xs-12">
                               
                         <div class="title" style="display: inline-block;">
                             <img data-bind="attr: { src: my.rootUrl + '/Uploads/ProfilePicture/' + AddedBy.ProfilePictureName }"
                                  class="img-circle avatar" alt="user profile image">
                             <strong>
                                 <a data-bind="text: AddedBy.FullName, attr: { href: my.rootUrl + '/Profile/UserProfile?userId=' + AddedBy.UserId }"></a>
                             </strong>     
                             <span data-bind="text: moment(DateInserted).format('MMMM Do YYYY, h:mm a')" class="text-muted "></span>                 
                         </div>
                         <p data-bind="text: Comments" style="white-space: pre-wrap;"></p>
                                                                         
                     </div>
                 </div>
             </div>
         </div>

         <div id="divNewThread" >
             
             <div class=" col-xs-12 no-left-margin no-right-margin panel-white  panel-shadow">
                 <div class="pull-left" style="display: inline-block;width:56px;">
                      <div class=" image">
                     <img data-bind="attr: { src: my.rootUrl + '/Uploads/ProfilePicture/' + my.meta.currentUser.ProfilePictureName }"
                          class="img-circle avatar" alt="user profile image">
                    </div>
                 </div>
                 <textarea data-bind="value: my.feedbackThreadsVm.threadData.Comments"
                           class=" form-control col-xs-8"  rows="1" type="text" placeholder="Comment for the Feedback (500 characters Max)" maxlength="500" style="resize: none;width:75%">

                 </textarea>
                 <button id="btnCommentSection" type="button" class="btn btn-info col-xs-2 pull-right" data-bind="click: function () { my.feedbackThreadsVm.addNewThread() }">Add New Note</button>
             </div>
         </div>
     </div>
</div>